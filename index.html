<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Aley Quiz</title>
<script defer src="https://unpkg.com/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
<style>
  :root{--bg1:#7c3aed;--bg2:#db2777;--bg3:#e11d48}
  *{box-sizing:border-box}
  body{
    margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial,sans-serif;
    min-height:100vh;display:flex;align-items:center;justify-content:center;
    color:#fff;background:linear-gradient(to bottom,var(--bg1),var(--bg2),var(--bg3));
    text-align:center;padding:16px;
  }
  .card{
    width:min(720px,100%);background:rgba(255,255,255,.10);
    border:1px solid rgba(255,255,255,.25);backdrop-filter:blur(8px);
    border-radius:20px;box-shadow:0 20px 60px rgba(0,0,0,.25);padding:28px;
  }
  h1,h2{margin:.2em 0}
  .btn{
    background:#fff;color:#a21caf;font-weight:700;border:0;border-radius:14px;
    padding:14px 22px;cursor:pointer;margin:8px;font-size:18px;transition:transform .15s ease;
  }
  .btn:hover{transform:scale(1.05)}
  .btn:active{transform:scale(.97)}
  .choice-big{color:#a21caf}.choice-small{color:#047857}
  .danger{color:#ef4444}
  .drop{margin-top:14px}
  .preview{margin-top:14px;border:2px dashed rgba(255,255,255,.5);border-radius:14px;padding:14px}
  img,video{max-width:100%;border-radius:14px;box-shadow:0 10px 30px rgba(0,0,0,.25)}
  .hint{opacity:.85;font-size:14px;margin-top:8px}
</style>
</head>
<body>
<main class="card" id="app">
  <h1>Aley'e Ã–zel Bilgi YarÄ±ÅŸmasÄ±</h1>
  <button class="btn" onclick="startQuiz()">YarÄ±ÅŸmaya BaÅŸla</button>
</main>

<audio id="quizMusic" src="quiz.mp3" loop></audio>
<audio id="loseMusic" src="lose.mp3"></audio>
<audio id="winMusic"  src="win.mp3"></audio>

<script>
function boom(opts={}) {
  if (!window.confetti) return;
  confetti(Object.assign({
    particleCount: 150, spread: 90, origin: { y: 0.6 }, scalar: 1
  }, opts));
}

const app = document.getElementById("app");
const quizMusic = document.getElementById("quizMusic");
const loseMusic = document.getElementById("loseMusic");
const winMusic  = document.getElementById("winMusic");

function safePlay(audio){
  if(!audio) return;
  const p = audio.play();
  if (p && typeof p.then === "function") p.catch(()=>{});
}

function startQuiz() {
  safePlay(quizMusic);
  app.innerHTML = `
    <h2>Soru: Aley <b>bÃ¼yÃ¼k</b> mÃ¼dÃ¼r yoksa <b>kÃ¼Ã§Ã¼k</b mÃ¼dÃ¼r?</h2>
    <div>
      <button class="btn choice-big" onclick="chooseBig()">BÃ¼yÃ¼k</button>
      <button class="btn choice-small" onclick="chooseSmall()">KÃ¼Ã§Ã¼k</button>
    </div>
    <p class="hint">CevabÄ± seÃ§ ðŸ˜‰</p>
  `;
}

function chooseBig() {
  quizMusic.pause();
  safePlay(loseMusic);
  app.innerHTML = `
    <h2 class="danger">ALEYLENDÄ°NÄ°Z!!!</h2>
    <p>Bir fotoÄŸraf yÃ¼kle:</p>
    <input class="drop" type="file" accept="image/*" onchange="previewImage(event)" />
    <div id="preview" class="preview">FotoÄŸraf yÃ¼klenmediâ€¦</div>
    <button class="btn" onclick="restart()">BaÅŸa DÃ¶n</button>
  `;
}

function chooseSmall() {
  quizMusic.pause();
  safePlay(winMusic);
  boom(); setTimeout(boom, 700);
  app.innerHTML = `
    <h2>DoÄŸru cevap! ðŸŽ‰</h2>
    <video src="happi.mp4" autoplay loop playsinline controls></video>
    <p class="hint">Video gÃ¶rÃ¼nmezse dosya adÄ±nÄ±n <b>happi.mp4</b> olduÄŸundan emin ol.</p>
    <button class="btn" onclick="restart()">Tekrar Oyna</button>
  `;
}

function previewImage(e) {
  const file = e.target.files && e.target.files[0];
  const box = document.getElementById("preview");
  if (!file) { box.textContent = "FotoÄŸraf yÃ¼klenmediâ€¦"; return; }
  const url = URL.createObjectURL(file);
  box.innerHTML = `<img src="${url}" alt="YÃ¼klenen gÃ¶rsel">`;
}

function restart(){
  winMusic.pause(); winMusic.currentTime = 0;
  loseMusic.pause(); loseMusic.currentTime = 0;
  app.innerHTML = `
    <h1>Aley'e Ã–zel Bilgi YarÄ±ÅŸmasÄ±</h1>
    <button class="btn" onclick="startQuiz()">YarÄ±ÅŸmaya BaÅŸla</button>
  `;
  boom(); setTimeout(boom, 600);
}

// Sayfa aÃ§Ä±ldÄ±ÄŸÄ±nda konfeti
window.onload = () => { boom(); setTimeout(boom, 600); };
</script>
</body>
</html>
